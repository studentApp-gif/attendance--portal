<!DOCTYPE html><html><head><meta charset="UTF-8"><title>SVCE Student Attendance Portal</title>
<style>
body{  font-family:Arial;  background:#f2f2f2;  margin:0;}
/* MAIN CARD */.container{  max-width:1200px;  margin:25px auto;  background:white;  padding:25px;  border-radius:10px;  box-shadow:0 2px 10px rgba(0,0,0,0.08);}
/* TITLE */h2{  text-align:center;  color:#004d80;  margin-bottom:20px;}
/* THREE COLUMN LAYOUT */.main{  display:flex;  gap:25px;}
/* LEFT PANEL */.left-panel{  width:25%;  border-right:1px solid #eee;  padding-right:15px;}
.left-panel h3{  margin-top:0;}
.badge{  background:#0f6b78;  color:white;  padding:3px 8px;  border-radius:6px;  font-size:12px;}
/* CENTER BUTTON PANEL */.center-panel{  width:20%;  display:flex;  flex-direction:column;  justify-content:center;  gap:20px;}
.big-btn{  background:#0f6b78;  color:white;  border:none;  padding:15px;  font-size:16px;  cursor:pointer;  border-radius:6px;}
.big-btn:hover{  background:#0c5661;}
/* RIGHT PANEL */.right-panel{  width:55%;}
/* FORM STYLES */label{  font-weight:bold;  display:block;  margin-top:10px;}
select,input{  width:100%;  padding:8px;  margin-top:5px;  margin-bottom:15px;  border:1px solid #ccc;  border-radius:4px;}
/* STUDENT LIST */#studentsList{  max-height:400px;  overflow-y:auto;  border-top:1px solid #eee;  padding-top:10px;}
#studentsList label{  display:flex;  align-items:center;  gap:10px;  margin-bottom:8px;}
.approvedStudent{  background:#e6ffe6;  padding:5px;  border-radius:5px;}
.card{  border:1px solid #ddd;  padding:10px;  margin-top:10px;  border-radius:5px;  background:#fafafa;}
.status-PENDING{color:orange;font-weight:bold}.status-APPROVED{color:green;font-weight:bold}.status-REJECTED{color:red;font-weight:bold}
</style></head>
<body>
<div class="container">
<h2>SVCE Student Attendance Portal</h2>
<div class="main">
<!-- LEFT SIDE --><div class="left-panel">
<h3>Student Requests <span id="reqCount" class="badge">0</span></h3>
<input placeholder="Search Roll No..." id="searchBox" onkeyup="filterRequests()">
<div id="requestsContainer"></div>
</div>
<!-- CENTER BUTTONS --><div class="center-panel">
<button class="big-btn" onclick="loadAttendance()">Load Students</button><button class="big-btn" id="saveBtn" onclick="submitAttendance()" disabled>Save Attendance</button>
</div>
<!-- RIGHT SIDE --><div class="right-panel">
<label>Select Year / Branch</label><select id="yearSelect"></select>
<label>Session</label><select id="session"><option value="Morning">Morning</option><option value="Afternoon">Afternoon</option></select>
<div id="attendanceForm"></div>
<p id="msg"></p>
</div>
</div>
</div>
<script>
const SCRIPT_URL="YOUR_SCRIPT_URL_HERE";const dept=new URLSearchParams(window.location.search).get("dept") || "CSM";
let requestCache=[];let fullRequestCache=[];let approvedRolls=[];
/* DROPDOWN */function loadDropdown(){const dropdown=document.getElementById("yearSelect");if(dept==="HS"){dropdown.innerHTML=`<option value="HS-CSM|1">1st Year CSM</option><option value="HS-CSE|1">1st Year CSE</option><option value="HS-ECE|1">1st Year ECE</option>`;}else{dropdown.innerHTML=`<option value="2">2nd Year</option><option value="3">3rd Year</option><option value="4">4th Year</option>`;}}loadDropdown();
/* LOAD STUDENTS */async function loadAttendance(){
document.getElementById("saveBtn").disabled=true;
const selected=document.getElementById("yearSelect").value;let finalDept=dept;let year=selected;
if(dept==="HS"){const parts=selected.split("|");finalDept=parts[0];year=parts[1];}
const res=await fetch(`${SCRIPT_URL}?action=getStudents&dept=${finalDept}&year=${year}`);const json=await res.json();
if(!json.success){msg("No students found");return;}
let html="<div id='studentsList'>";
json.students.forEach(s=>{const highlight=approvedRolls.includes(s.rollno)?"approvedStudent":"";html+=`<label class="${highlight}"><input type="checkbox" value="${s.rollno}">${s.rollno}</label>`;});
html+="</div>";
document.getElementById("attendanceForm").innerHTML=html;document.getElementById("saveBtn").disabled=false;}
/* MESSAGE */function msg(t){document.getElementById("msg").innerText=t;}
</script>
</body></html>
